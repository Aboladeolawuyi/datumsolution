import{_ as H,f as y,y as J,a as Y,o as B,w as v,b as f,A as V,d as M,au as K,G as Q,E as $,t as w}from"./index-Su8tnc_R.js";import{V as tt}from"./VContainer-C1ldhtsk.js";import{V as ot,e as nt,a as at}from"./VCard-CI8uxGEo.js";import{V as et,a as U}from"./VTextField-B57ypF5b.js";import{V as st}from"./VSelect-D4OjLXRY.js";import{V as lt}from"./VAlert-DdabWUkO.js";/* empty css              */import"./transition-BU24WTwu.js";import"./VField-DdaP0l72.js";import"./index-dH8apMi6.js";import"./forwardRefs-DWGaNmQL.js";import"./VOverlay-BjYto8_U.js";import"./scopeId-Cr7JLzwi.js";import"./ssrBoot-DROEFUJo.js";import"./VDivider-V9qPOaeP.js";import"./VChip-TzyWrATI.js";import"./VSlideGroup-C_IYVIxz.js";const rt={__name:"CoordinateTransformation",setup(ut){const N={clarke:{a:6378249145e-3,f:.003407561378699334},wgs84:{a:6378137,f:.0033528106647474805}},G={dx:-92,dy:-93,dz:122,rx:0,ry:0,rz:0,scale:1},F=y(null),z=y(null),k=y(null),q=y("clarke"),S=y(null),Z=y(null),E=J(()=>q.value==="clarke"?"WGS 84":"Clarke 1880"),x=n=>n*Math.PI/180,L=n=>n*180/Math.PI,D=n=>2*n-n*n;function I(n,o,e,m){const{a:s,f:u}=N[m],t=D(u),a=.9996,r=n-5e5,i=o,g=x((e-1)*6-180+3),c=i/a/(s*(1-t/4-3*t**2/64-5*t**3/256)),d=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t)),l=c+(3*d/2-27*d**3/32)*Math.sin(2*c)+(21*d**2/16-55*d**4/32)*Math.sin(4*c)+151*d**3/96*Math.sin(6*c),p=t/(1-t)*Math.cos(l)**2,b=Math.tan(l)**2,C=s/Math.sqrt(1-t*Math.sin(l)**2),R=C*(1-t)/(1-t*Math.sin(l)**2),T=r/(C*a),W=l-C*Math.tan(l)/R*(T**2/2-(5+3*b+10*p)*T**4/24+(61+90*b+298*p)*T**6/720),j=g+(T-(1+2*b+p)*T**3/6+(5-2*p+28*b)*T**5/120)/Math.cos(l);return{lat:L(W),lon:L(j)}}function _(n,o,e){const{a:m,f:s}=N[e],u=D(s),t=x(n),a=x(o),r=m/Math.sqrt(1-u*Math.sin(t)**2),i=0;return{x:(r+i)*Math.cos(t)*Math.cos(a),y:(r+i)*Math.cos(t)*Math.sin(a),z:((1-u)*r+i)*Math.sin(t)}}function A({x:n,y:o,z:e},m){const{dx:s,dy:u,dz:t,rx:a,ry:r,rz:i,scale:g}=G,h=g;if(m==="forward")return{x:s+h*(n+i*o-r*e),y:u+h*(-i*n+o+a*e),z:t+h*(r*n-a*o+e)};{const c=n-s,d=o-u,l=e-t,p=1/h;return{x:p*(c-i*d+r*l),y:p*(i*c+d-a*l),z:p*(-r*c+a*d+l)}}}function P({x:n,y:o,z:e},m){const{a:s,f:u}=N[m],t=D(u),a=Math.sqrt(n**2+o**2),r=Math.atan2(e*s,a*(1-u)*s),i=Math.atan2(e+t/(1-t)*(1-u)*s*Math.sin(r)**3,a-t*s*Math.cos(r)**3),g=Math.atan2(o,n);return{lat:L(i),lon:L(g)}}function O(n,o,e,m){const{a:s,f:u}=N[e],t=D(u),a=x(n),r=x(o),i=x((m-1)*6-180+3),g=.9996,h=s/Math.sqrt(1-t*Math.sin(a)**2),c=Math.tan(a)**2,d=t/(1-t)*Math.cos(a)**2,l=(r-i)*Math.cos(a),p=s*((1-t/4-3*t**2/64-5*t**3/256)*a-(3*t/8+3*t**2/32+45*t**3/1024)*Math.sin(2*a)+(15*t**2/256+45*t**3/1024)*Math.sin(4*a)-35*t**3/3072*Math.sin(6*a)),b=g*h*(l+(1-c+d)*l**3/6+(5-18*c+c**2+72*d)*l**5/120)+5e5,C=g*(p+h*Math.tan(a)*(l**2/2+(5-c+9*d+4*d**2)*l**4/24+(61-58*c+c**2+600*d)*l**6/720));return{easting:b,northing:C}}function X(){const n=q.value,o=n==="clarke"?"wgs84":"clarke",{lat:e,lon:m}=I(F.value,z.value,k.value,n),s=_(e,m,n),u=A(s,n==="clarke"?"forward":"inverse"),{lat:t,lon:a}=P(u,o),{easting:r,northing:i}=O(t,a,o,k.value);S.value=r,Z.value=i,console.log("Converted Lat/Lon:",e.toFixed(8),m.toFixed(8)),console.log("XYZ:",s),console.log("Transformed XYZ:",u),console.log("New Lat/Lon:",t.toFixed(8),a.toFixed(8))}return(n,o)=>(B(),Y(tt,{class:"py-10"},{default:v(()=>[f(ot,{class:"mx-auto pa-6 rounded-xl elevation-6","max-width":"600"},{default:v(()=>[f(nt,{class:"text-h5 font-weight-bold text-center text-primary"},{default:v(()=>o[4]||(o[4]=[V(" UTM Coordinate Transformation "),M("br",null,null,-1),V(" (Clarke 1880 â†” WGS 84) ")])),_:1,__:[4]}),f(at,null,{default:v(()=>[f(et,{class:"mt-4",onSubmit:Q(X,["prevent"])},{default:v(()=>[f(U,{modelValue:z.value,"onUpdate:modelValue":o[0]||(o[0]=e=>z.value=e),modelModifiers:{number:!0},label:"Northing (m)",type:"number",outlined:"",dense:"",class:"mb-4",required:""},null,8,["modelValue"]),f(U,{modelValue:F.value,"onUpdate:modelValue":o[1]||(o[1]=e=>F.value=e),modelModifiers:{number:!0},label:"Easting (m)",type:"number",outlined:"",dense:"",class:"mb-4",required:""},null,8,["modelValue"]),f(U,{modelValue:k.value,"onUpdate:modelValue":o[2]||(o[2]=e=>k.value=e),modelModifiers:{number:!0},label:"UTM Zone",type:"number",outlined:"",dense:"",class:"mb-4",required:""},null,8,["modelValue"]),f(st,{modelValue:q.value,"onUpdate:modelValue":o[3]||(o[3]=e=>q.value=e),items:["clarke","wgs84"],label:"Input Datum",outlined:"",dense:"",class:"mb-4",required:""},null,8,["modelValue"]),f($,{class:"mt-4",color:"primary",block:"",onClick:X,elevation:"2"},{default:v(()=>[V(" Transform to "+w(E.value),1)]),_:1})]),_:1}),S.value!==null?(B(),Y(lt,{key:0,type:"success",class:"mt-6",border:"start",variant:"tonal"},{default:v(()=>[M("p",null,[o[5]||(o[5]=M("strong",null,"Transformed Datum:",-1)),V(" "+w(E.value),1)]),M("p",null,[o[6]||(o[6]=M("strong",null,"Output Easting:",-1)),V(" "+w(S.value.toFixed(3))+" m",1)]),M("p",null,[o[7]||(o[7]=M("strong",null,"Output Northing:",-1)),V(" "+w(Z.value.toFixed(3))+" m",1)]),M("p",null,[o[8]||(o[8]=M("strong",null,"Zone:",-1)),V(" "+w(k.value),1)])]),_:1})):K("",!0)]),_:1})]),_:1})]),_:1}))}},wt=H(rt,[["__scopeId","data-v-2fdc9897"]]);export{wt as default};
